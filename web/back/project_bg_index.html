<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>後台-首頁</title>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="../../css/bg/adminlte.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="../../css/bg/all.min.css">
  <!-- overlayScrollbars -->
  <link rel="stylesheet" href="../../css/bg/OverlayScrollbars.min.css">

  <link rel="stylesheet" href="../../css/bootstrap.min.css">
  <link rel="stylesheet" href="../../css/all.min.css">
  <link rel="stylesheet" href="../../css/myall.css">
  <style>
    .site_card {
      background-color: var(--mycolor23_1);
    }

    .border_css {
      margin-top: 0px;
    }
  </style>
</head>

<body class="hold-transition sidebar-mini">
  <div class="wrapper">
    <!-- Navbar -->
    <nav class="main-header navbar navbar-expand bg-dark">
      <!-- 上方左邊icon Left navbar links -->
      <ul class="navbar-nav">
        <li class="nav-item d-none d-sm-inline-block">
          <a href="#" class="nav-link text-white"><i class="nav-icon fa-solid fa-house fa-th px-2"></i>後台管理</a>
        </li>

      </ul>
      <ul class="navbar-nav ml-auto mr-4">
        <li class="nav-item d-none d-sm-inline-block px-3">
          <span class="nav-link text-white d-none" id="user_message"></span>
        </li>
        <li class="nav-item d-none d-sm-inline-block">
          <button class="btn btn-outline-light" id="logout_btn">登出</button>
        </li>
      </ul>

    </nav>
    <!-- /.navbar -->

    <!-- 左側選單 Main Sidebar Container -->
    <aside class="main-sidebar sidebar-white-primary">
      <!-- 左側選單 左上角Logo Brand Logo -->
      <div class="brand-link bg-dark border-dark text-center">
        <span class="brand-text fw-800">Logo早餐店</span>
      </div>

      <!-- Sidebar -->
      <div class="sidebar">

        <!-- 左側選單內容 Sidebar Menu -->
        <nav class="mt-2">
          <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
            <!-- 首頁 -->
            <li class="nav-item">
              <a href="../../web/back/project_bg_index.html" class="nav-link bg-dark">
                <i class="nav-icon fa-solid fa-house fa-th"></i>
                <p>
                  首頁
                </p>
              </a>
            </li>
            <!-- 會員管理 -->
            <li class="nav-item">
              <a href="#" class="nav-link">
                <i class="nav-icon fa-solid fa-user-group"></i>
                <p>
                  會員管理
                  <i class="right fas fa-angle-left"></i>
                </p>
              </a>
              <ul class="nav nav-treeview border-top border-bottom">
                <li class="nav-item">
                  <a href="#" class="nav-link">
                    <i class="nav-icon fa-solid fa-users-gear"></i>
                    <p>管理者</p>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="../../web/back/project_bg_member_Read.html" class="nav-link">
                    <i class="nav-icon fa-solid fa-users"></i>
                    <p>會員</p>
                  </a>
                </li>
              </ul>
            </li>
            <!-- 內容 -->
            <li class="nav-item">
              <a href="#" class="nav-link">
                <i class="nav-icon fa-solid fa-note-sticky"></i>
                <p>
                  內容
                  <i class="right fas fa-angle-left"></i>
                </p>
              </a>
              <ul class="nav nav-treeview border-top border-bottom">
                <li class="nav-item ">
                  <a href="#" class="nav-link">
                    <i class="nav-icon fa-solid fa-cart-shopping"></i>
                    <p>訂單紀錄</p>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="#" class="nav-link">
                    <i class="nav-icon fa-solid fa-clock-rotate-left"></i>
                    <p>預約紀錄</p>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="../../web/back/project_bg_product_laryer_Read.html" class="nav-link">
                    <i class="nav-icon fa-solid fa-store"></i>
                    <p>商品</p>
                  </a>
                </li>
                <li class="nav-item">
                  <a href="#" class="nav-link">
                    <i class="nav-icon fa-solid fa-image"></i>
                    <p>媒體</p>
                  </a>
                </li>
              </ul>
            </li>
            <!-- 設定 -->
            <li class="nav-item">
              <a href="#" class="nav-link">
                <i class="nav-icon fa-solid fa-gear"></i>
                <p>
                  系統設定
                </p>
              </a>
            </li>
          </ul>
        </nav>
        <!-- /.sidebar-menu -->
      </div>
      <!-- /.sidebar -->
    </aside>

    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">
      <!-- 內容主題及右側首頁及主題 Content Header (Page header) -->
      <section class="content-header">
        <div class="container-fluid">
          <div class="row mb-2">
            <div class="col-sm-6">
              <h1>控制台</h1>
            </div>
          </div>
        </div><!-- /.container-fluid -->
      </section>

      <!-- 主要內容Main content -->
      <section class="content px-5">
        <div class="container-fluid">
          <div class="row">
            <!-- 功能介面 -->
            <div class="col-6">
              <div class="card pb-3">
                <div class="card-body">
                  <div class="row px-3 pb-3">
                    <h5><i class="fa-solid fa-desktop mr-1"></i>Site</h5>
                  </div>
                  <div class="row mt-2 mx-2 gx-2">
                    <div class="col-4">
                      <a href="#" class="text-decoration-none">
                        <div class="card site_card">
                          <div class="card-body">
                            <p class="m-0"><i class="nav-icon fa-solid fa-user-group me-1"></i>管理者</p>
                          </div>
                        </div>
                      </a>
                    </div>
                    <div class="col-4">
                      <a href="../../web/back/project_bg_member_Read.html" class="text-decoration-none">
                        <div class="card site_card">
                          <div class="card-body">
                            <p class="m-0"><i class="nav-icon fa-solid fa-user-group me-1"></i>會員</p>
                          </div>
                        </div>
                      </a>
                    </div>
                    <div class="col-4">
                      <a href="../../web/back/project_bg_product_laryer_Read.html" class="text-decoration-none">
                        <div class="card site_card">
                          <div class="card-body">
                            <p class="m-0"><i class="nav-icon fa-solid fa-user-group me-1"></i>商品</p>
                          </div>
                        </div>
                      </a>
                    </div>
                    <div class="col-4">
                      <a href="#" class="text-decoration-none">
                        <div class="card site_card">
                          <div class="card-body">
                            <p class="m-0"><i class="nav-icon fa-solid fa-user-group me-1"></i>訂單紀錄</p>
                          </div>
                        </div>
                      </a>
                    </div>
                    <div class="col-4">
                      <a href="#" class="text-decoration-none">
                        <div class="card site_card">
                          <div class="card-body">
                            <p class="m-0"><i class="nav-icon fa-solid fa-user-group me-1"></i>預約紀錄</p>
                          </div>
                        </div>
                      </a>
                    </div>
                    <div class="col-4">
                      <a href="#" class="text-decoration-none">
                        <div class="card site_card">
                          <div class="card-body">
                            <p class="m-0"><i class="nav-icon fa-solid fa-user-group me-1"></i>媒體</p>
                          </div>
                        </div>
                      </a>
                    </div>
                  </div>
                </div>
              </div>
              <div class="card mt-5">
                <div class="card-body">
                  <div class="row px-3 pb-2">
                    <h5><i class="fa-solid fa-chart-line mr-1"></i>Chart</h5>
                  </div>
                  <div class="row px-3">
                    <canvas id="myChart"></canvas>
                  </div>
                </div>
              </div>
            </div>
            <!-- 使用者登入狀況 -->
            <div class="col-6">
              <div class="card">
                <div class="card-body">
                  <div class="row px-3 pb-3">
                    <h5><i class="fa-solid fa-people-group me-1"></i>Logged-in Users</h5>
                  </div>

                  <div class="row text-center">
                    <div class="col-4">姓名</div>
                    <div class="col-4">等級</div>
                    <div class="col-4">日期</div>
                  </div>
                  <div class="row d-flex justify-content-center">
                    <hr class="border-1 border_css col-10">
                  </div>

                  <div class="row text-center mt-2">
                    <div class="col-4">XXX</div>
                    <div class="col-4">XXX</div>
                    <div class="col-4">XXX</div>
                  </div>

                  <div class="row text-center mt-2">
                    <div class="col-4">XXX</div>
                    <div class="col-4">XXX</div>
                    <div class="col-4">XXX</div>
                  </div>

                  <div class="row text-center mt-2">
                    <div class="col-4">XXX</div>
                    <div class="col-4">XXX</div>
                    <div class="col-4">XXX</div>
                  </div>

                  <div class="row text-center mt-2">
                    <div class="col-4">XXX</div>
                    <div class="col-4">XXX</div>
                    <div class="col-4">XXX</div>
                  </div>

                  <div class="row text-center mt-2">
                    <div class="col-4">XXX</div>
                    <div class="col-4">XXX</div>
                    <div class="col-4">XXX</div>
                  </div>

                  <div class="row text-center mt-2">
                    <div class="col-4">XXX</div>
                    <div class="col-4">XXX</div>
                    <div class="col-4">XXX</div>
                  </div>

                  <div class="row text-center mt-2">
                    <div class="col-4">XXX</div>
                    <div class="col-4">XXX</div>
                    <div class="col-4">XXX</div>
                  </div>
                </div>
              </div>
              <div class="card mt-5">
                <div class="card-body">
                  <div class="row px-3">
                    <h5><i class="fa-solid fa-ranking-star me-1"></i>銷售量</h5>
                  </div>
                  <div class="row px-3">
                    <div class="row text-center">
                      <div class="col-4">產品</div>
                      <div class="col-4">數量</div>
                      <div class="col-4">交易金額</div>
                    </div>
                    <div class="row d-flex justify-content-center">
                      <hr class="border-1 border_css col-10">
                    </div>
                    <div class="row text-center mt-2">
                      <div class="col-4">XXX</div>
                      <div class="col-4">XXX</div>
                      <div class="col-4">XXX</div>
                    </div>
                    <div class="row text-center mt-2">
                      <div class="col-4">XXX</div>
                      <div class="col-4">XXX</div>
                      <div class="col-4">XXX</div>
                    </div>
                    <div class="row text-center mt-2">
                      <div class="col-4">XXX</div>
                      <div class="col-4">XXX</div>
                      <div class="col-4">XXX</div>
                    </div>
                    <div class="row text-center mt-2">
                      <div class="col-4">XXX</div>
                      <div class="col-4">XXX</div>
                      <div class="col-4">XXX</div>
                    </div>
                    <div class="row text-center mt-2">
                      <div class="col-4">XXX</div>
                      <div class="col-4">XXX</div>
                      <div class="col-4">XXX</div>
                    </div>
                    <div class="row text-center mt-2">
                      <div class="col-4">XXX</div>
                      <div class="col-4">XXX</div>
                      <div class="col-4">XXX</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- /.row -->
        </div><!-- /.container-fluid -->
      </section>
      <!-- /.content -->
    </div>
    <!-- /.content-wrapper -->

    <footer class="main-footer">
      <div class="float-right d-none d-sm-block">
        <b>雲端</b> 2期
      </div>
      <strong>Copyright &copy; 2014-2021 <a href="https://adminlte.io">AdminLTE.io</a>.</strong> All rights reserved.
    </footer>

    <!-- Control Sidebar -->
    <aside class="control-sidebar control-sidebar-dark">
      <!-- Control sidebar content goes here -->
    </aside>
    <!-- /.control-sidebar -->
  </div>
  <!-- ./wrapper -->

  <!-- jQuery -->
  <script src="../../js/jquery-3.7.1.min.js"></script>
  <!-- Bootstrap -->
  <script src="../../js/bootstrap.bundle.min.js"></script>
  <!-- 隱藏選單 AdminLTE App -->
  <script src="../../js/bg/adminlte.min.js"></script>
  <!-- fullCalendar 2.2.5 -->
  <!-- <script src="js/bg/moment.min.js"></script> -->
  <!-- <script src="js/bg/main.js"></script> -->
  <!-- chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    $(function () {
      if (getCookie != "UID01") {
        // 判斷是否登入 UID01存在, 傳遞至後端api 判斷是否合法
        var dataJSON = {};
        dataJSON["UID01"] = getCookie("UID01");
        console.log(JSON.stringify(dataJSON));

        $.ajax({
          type: "POST",
          url: "../../api/common/project_Member_CheckUID_api.php",
          data: JSON.stringify(dataJSON),
          dataType: "json",
          success: showdata_Check_UID,
          error: function () {
            alert("error-../../api/common/project_Member_CheckUID_api.php");
          }
        });
      } else {
        location.href = "../../project_index.html";
      }
    });

    // 登出帳號 #logout_btn
    $(function () {
      $("#logout_btn").click(function () {
        if (confirm("確定是否登出？")) {
          // console.log("logout_ok_btn");
          // 更改UID01為""
          setCookie("UID01", "", 7);
          // 需使用套件，刪除UID01值
          // $.removeCookie('UID01', { path: '/' });
          alert("登出成功");
          location.href = "../../project_index.html";
        }
      });
    });

    // 檢查UID 是否可保持繼續登入
    function showdata_Check_UID(data) {
      console.log(data);

      if (data.state) {
        // console.log(data.data[0].UID01);
        setCookie("UID01", data.data[0].UID01, 7);
        // 驗證成功
        if (data.data[0].Level != 90 && data.data[0].Level != 100) {
          if (data.data[0].Permissions == 1) {
            // 顯示使用者
            $("#user_message").removeClass("d-none");
            $("#user_message").addClass("ms-3");
            $("#user_message").text(data.data[0].UserName + " 早安~!!");
          } else {
            location.href = "../../project_index.html";
          }
        } else {
          location.href = "../../project_index.html";
          // setCookie("UID01", "", 7);
        }
      } else {
        location.href = "../../project_index.html";
      }
    }


    // Chart
    const ctx = document.getElementById('myChart');

    new Chart(ctx, {
      type: 'line',
      data: {
        labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
        datasets: [{
          label: '# of Votes',
          data: [12, 19, 3, 5, 2, 3],
          borderWidth: 1
        }]
      },
      options: {
        scales: {
          y: {
            beginAtZero: true
          }
        }
      }
    });


    // w3s setCookie
    function setCookie(cname, cvalue, exdays) {
      const d = new Date();
      d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
      let expires = "expires=" + d.toUTCString();
      document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
    }

    // w3s getCookie
    function getCookie(cname) {
      let name = cname + "=";
      let decodedCookie = decodeURIComponent(document.cookie);
      let ca = decodedCookie.split(';');
      for (let i = 0; i < ca.length; i++) {
        let c = ca[i];
        while (c.charAt(0) == ' ') {
          c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
          return c.substring(name.length, c.length);
        }
      }
      return "";
    }
  </script>
</body>

</html>