<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>後台-管理者</title>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="./css/bg/adminlte.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="./css/bg/all.min.css">
    <!-- overlayScrollbars -->
    <link rel="stylesheet" href="./css/bg/OverlayScrollbars.min.css">

    <link rel="stylesheet" href="./css/bootstrap.min.css">
    <link rel="stylesheet" href="./css/all.min.css">
    <link rel="stylesheet" href="./css/myall.css">
    <style>
        .site_card {
            background-color: var(--mycolor23_1);
        }

        .border_css {
            margin-top: 0px;
        }
    </style>
</head>

<body class="hold-transition sidebar-mini">
    <div class="wrapper">
        <!-- Navbar -->
        <nav class="main-header navbar navbar-expand bg-dark">
            <!-- 上方左邊icon Left navbar links -->
            <ul class="navbar-nav">
                <li class="nav-item d-none d-sm-inline-block">
                    <a href="#" class="nav-link text-white"><i
                            class="nav-icon fa-solid fa-house fa-th px-2"></i>後台管理</a>
                </li>

            </ul>
            <ul class="navbar-nav ml-auto mr-4">
                <li class="nav-item d-none d-sm-inline-block px-3">
                    <span class="nav-link text-white">管理者</span>
                </li>
                <li class="nav-item d-none d-sm-inline-block">
                    <button class="btn btn-outline-light">登出</button>
                </li>
            </ul>

        </nav>
        <!-- /.navbar -->

        <!-- 左側選單 Main Sidebar Container -->
        <aside class="main-sidebar sidebar-white-primary">
            <!-- 左側選單 左上角Logo Brand Logo -->
            <div class="brand-link bg-dark border-dark text-center">
                <span class="brand-text fw-800">Logo早餐店</span>
            </div>

            <!-- Sidebar -->
            <div class="sidebar">

                <!-- 左側選單內容 Sidebar Menu -->
                <nav class="mt-2">
                    <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu"
                        data-accordion="false">
                        <!-- 首頁 -->
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="nav-icon fa-solid fa-house fa-th"></i>
                                <p>
                                    首頁
                                </p>
                            </a>
                        </li>
                        <!-- 會員管理 -->
                        <li class="nav-item menu-open">
                            <a href="#" class="nav-link bg-dark">
                                <i class="nav-icon fa-solid fa-user-group"></i>
                                <p>
                                    會員管理
                                    <i class="right fas fa-angle-left"></i>
                                </p>
                            </a>
                            <ul class="nav nav-treeview border-top border-bottom ">
                                <li class="nav-item">
                                    <a href="#" class="nav-link bg-secondary">
                                        <i class="nav-icon fa-solid fa-users-gear"></i>
                                        <p>管理者</p>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="#" class="nav-link">
                                        <i class="nav-icon fa-solid fa-users"></i>
                                        <p>會員</p>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <!-- 內容 -->
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="nav-icon fa-solid fa-note-sticky"></i>
                                <p>
                                    內容
                                    <i class="right fas fa-angle-left"></i>
                                </p>
                            </a>
                            <ul class="nav nav-treeview border-top border-bottom">
                                <li class="nav-item ">
                                    <a href="#" class="nav-link">
                                        <i class="nav-icon fa-solid fa-cart-shopping"></i>
                                        <p>訂單紀錄</p>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="#" class="nav-link">
                                        <i class="nav-icon fa-solid fa-clock-rotate-left"></i>
                                        <p>預約紀錄</p>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="#" class="nav-link">
                                        <i class="nav-icon fa-solid fa-store"></i>
                                        <p>商品</p>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="#" class="nav-link">
                                        <i class="nav-icon fa-solid fa-image"></i>
                                        <p>媒體</p>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <!-- 設定 -->
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="nav-icon fa-solid fa-gear"></i>
                                <p>
                                    系統設定
                                </p>
                            </a>
                        </li>
                    </ul>
                </nav>
                <!-- /.sidebar-menu -->
            </div>
            <!-- /.sidebar -->
        </aside>

        <!-- Content Wrapper. Contains page content -->
        <div class="content-wrapper">
            <!-- 內容主題及右側首頁及主題 Content Header (Page header) -->
            <section class="content-header">
                <div class="container-fluid">
                    <div class="row mb-2">
                        <div class="col-sm-6">
                            <h1><i class="nav-icon fa-solid fa-users me-1"></i>管理者-管理</h1>
                        </div>
                    </div>
                </div><!-- /.container-fluid -->
            </section>

            <!-- 主要內容Main content -->
            <section class="content px-5">
                <div class="container-fluid">
                    <div class="row">
                        <!-- 功能介面 -->
                        <div class="card">
                            <div class="card-body">
                                <div class="row d-flex justify-content-center">
                                    <div class="col-11 text-start py-3">
                                        <button class="btn btn-outline-dark" id="add_btn" data-bs-toggle="modal" data-bs-target="#AddModal">新增</button>
                                        <button class="btn btn-outline-dark">刪除</button>
                                    </div>
                                </div>

                                <div class="row d-flex justify-content-center">
                                    <div class="col-11">
                                        <table
                                            class="table table-bordered table-striped table-hover table-sm border text-center">
                                            <thead>
                                                <tr>
                                                    <th>帳號</th>
                                                    <th>姓名</th>
                                                    <th>等級</th>
                                                    <th>權限</th>
                                                    <th>更新時間</th>
                                                    <th>建檔時間</th>
                                                    <th>修改</th>
                                                    <th>
                                                        <div class="form-check form-check-inline">
                                                            <input type="checkbox" class="mt-1 form-check-input"
                                                                name="delete_choose" id="delete_choose01">
                                                            <label for="delete_choose01"
                                                                class="form-check-label">全選</label>
                                                        </div>
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody id="mydata">
                                                <tr>
                                                    <td style="vertical-align: middle;"><a href="#" id="update_pwd_btn"
                                                            data-bs-toggle="modal"
                                                            data-bs-target="#UpdatePwdModal">admin03</a></td>
                                                    <td style="vertical-align: middle;">王曉明</td>
                                                    <td style="vertical-align: middle;">管理員-員工</td>
                                                    <td style="vertical-align: middle;">啟用</td>
                                                    <td style="vertical-align: middle;">
                                                        <p class="my-0">2024/03/14</p>
                                                        <p class="my-0">18:20</p>
                                                    </td>
                                                    <td style="vertical-align: middle;">
                                                        <p class="my-0">2024/03/14</p>
                                                        <p class="my-0">18:20</p>
                                                    </td>
                                                    <td style="vertical-align: middle;">
                                                        <button class="btn btn-outline-dark" id="update_btn"
                                                            data-bs-toggle="modal"
                                                            data-bs-target="#UpdateModal">修改</button>
                                                    </td>
                                                    <td style="vertical-align: middle;">
                                                        <div class="form-check form-check-inline">
                                                            <input type="checkbox" class="mt-1 ms-auto form-check-input"
                                                                name="delete_choose" id="delete_choose02">
                                                            <label for="delete_choose02"
                                                                class="form-check-label"></label>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- /.row -->
        </div><!-- /.container-fluid -->
        </section>
        <!-- /.content -->
    </div>
    <!-- /.content-wrapper -->

    <footer class="main-footer">
        <div class="float-right d-none d-sm-block">
            <b>雲端</b> 2期
        </div>
        <strong>Copyright &copy; 2014-2021 <a href="https://adminlte.io">AdminLTE.io</a>.</strong> All rights
        reserved.
    </footer>

    <!-- section04 MemberUpdateModal 編輯會員 -->
    <div class="modal fade" id="UpdateModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header text-bg-dark">
                    <h1 class="modal-title fs-5 text-center" id="exampleModalLabel">編輯管理者</h1>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="timeline-section02">
                        <div class="row">
                            <div class="col-6">
                                <div class="mb-2">
                                    <label for="update_photo" class="form-label">大頭照 :</label>
                                    <div class="mt-2 mb-4 d-flex justify-content-center align-items-center border border-1" style="height: 200px;">
                                        <i class="fa-solid fa-circle-user fa-10x"></i>
                                    </div>
                                    <input type="file" class="form-control mt-2" placeholder="" id="update_photo"
                                        name="update_photo">
                                    <div class="valid-feedback" id="update_photo_ok"></div>
                                    <div class="invalid-feedback" id="update_photo_no"></div>
                                </div>
                                <div class="mb-2">
                                    <label for="update_account" class="form-label">管理者帳號 :</label>
                                    <input type="text" class="form-control" placeholder="" id="update_account"
                                        name="update_account" disabled>
                                </div>
                                <div class="mb-2">
                                    <label for="update_level" class="form-label">管理者等級 :</label>
                                    <select name="update_level" id="update_level" class="form-select">
                                        <option value="老闆">老闆</option>
                                        <option value="部長">部長</option>
                                        <option value="員工">員工</option>
                                    </select>
                                </div>
                                <div class="mb-2">
                                    <div>
                                        <label for="update_pm" class="form-label">管理者權限 :</label>
                                    </div>
                                    <div class="form-check form-switch">
                                        <input type="checkbox" class="form-check-input" name="update_pm" id="update_pm">
                                        <label for="update_pm" class="form-check-label" id="update_pm_text">停權</label>
                                    </div>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="mb-2">
                                    <label for="update_username" class="form-label">管理者姓名 :</label>
                                    <input type="text" class="form-control" placeholder="" id="update_username"
                                        name="update_username">
                                    <div class="valid-feedback">名稱可以</div>
                                    <div class="invalid-feedback">名稱不得低於一個字</div>
                                </div>
                                <div class="mb-2">
                                    <label for="update_nickname" class="form-label">管理者暱稱 :</label>
                                    <input type="text" class="form-control" placeholder="" id="update_nickname"
                                        name="update_nickname">
                                    <div class="valid-feedback">暱稱可以</div>
                                    <div class="invalid-feedback">暱稱不得低於一個字</div>
                                </div>
                                <div class="mb-2">
                                    <label for="update_gender" class="form-label">管理者性別</label>
                                    <div></div>
                                    <div class="form-check form-check-inline">
                                        <input type="radio" class="form-check-input" name="rad" id="radio_male"
                                            value="男性" checked>
                                        <label for="radio_male" class="form-check-label">男性</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input type="radio" class="form-check-input" name="rad" id="radio_female"
                                            value="女性">
                                        <label for="radio_female" class="form-check-label">女性</label>
                                    </div>
                                </div>
                                <div class="mb-2">
                                    <label for="update_mobile" class="form-label">連絡電話 :</label>
                                    <input type="text" class="form-control" placeholder="" id="update_mobile"
                                        name="update_mobile">
                                    <div class="valid-feedback">字數符合</div>
                                    <div class="invalid-feedback">低於或超過10個字</div>
                                </div>
                                <div class="mb-2">
                                    <label for="update_email" class="form-label">電子郵件 :</label>
                                    <input type="text" class="form-control" placeholder="" id="update_email"
                                        name="update_email">
                                    <div class="valid-feedback">符合</div>
                                    <div class="invalid-feedback">不符合</div>
                                </div>
                                <div class="mb-2">
                                    <label for="update_birthday" class="form-label">生日 :</label>
                                    <input type="text" class="form-control" placeholder="" id="update_birthday"
                                        name="update_birthday">
                                    <div class="valid-feedback"></div>
                                    <div class="invalid-feedback"></div>
                                </div>
                                <div class="mb-2">
                                    <label for="update_address" class="form-label">地址 :</label>
                                    <input type="text" class="form-control" placeholder="" id="update_address"
                                        name="update_address">
                                    <div class="valid-feedback"></div>
                                    <div class="invalid-feedback"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                        <button type="button" class="btn btn-outline-dark" id="modal_update_btn">更新</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 變更密碼 -->
    <div class="modal fade" id="UpdatePwdModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header text-bg-dark">
                    <h1 class="modal-title fs-5 text-center" id="exampleModalLabel">變更密碼</h1>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="timeline-section02 pb-4">
                        <div class="row d-flex justify-content-center">
                            <div class="col-11">
                                <div class="mb-2">
                                    <label for="update_old_pwd" class="form-label">舊密碼 :</label>
                                    <div class="input-group">
                                        <input type="password" class="form-control" placeholder="" id="update_old_pwd"
                                            name="update_old_pwd">
                                        <button class="btn btn-outline-secondary" type="button" id="togglePassword_old">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="mb-2">
                                    <label for="update_new_pwd" class="form-label">新密碼 :</label>
                                    <div class="input-group">
                                        <input type="password" class="form-control" placeholder="" id="update_new_pwd"
                                            name="update_new_pwd">
                                        <button class="btn btn-outline-secondary" type="button" id="togglePassword_new">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </div>
                                    <div class="valid-feedback">密碼可以</div>
                                    <div class="invalid-feedback">密碼只在3~10個字內</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary mt-3" data-bs-dismiss="modal">取消</button>
                        <button type="button" class="btn btn-outline-dark mt-3" id="modal_update_btn">更新</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- jQuery -->
    <script src="./js/jquery-3.7.1.min.js"></script>
    <!-- Bootstrap -->
    <script src="./js/bootstrap.bundle.min.js"></script>
    <!-- 隱藏選單 AdminLTE App -->
    <script src="./js/bg/adminlte.min.js"></script>
    <!-- fullCalendar 2.2.5 -->
    <script src="./js/bg/moment.min.js"></script>
    <script src="./js/bg/main.js"></script>
    <!-- chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        // 密碼顯示
        document.getElementById('togglePassword_old').addEventListener('click', function () {
            var update_new_pwd = document.getElementById('update_old_pwd');
            var icon = this.querySelector('i');

            // 如果输入框的类型是密码，则切换为文本，否则切换为密码
            if (update_old_pwd.type === 'password') {
                update_old_pwd.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                update_old_pwd.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        });

        document.getElementById('togglePassword_new').addEventListener('click', function () {
            var update_new_pwd = document.getElementById('update_new_pwd');
            var icon = this.querySelector('i');

            // 如果输入框的类型是密码，则切换为文本，否则切换为密码
            if (update_new_pwd.type === 'password') {
                update_new_pwd.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                update_new_pwd.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        });
    </script>

    <!-- <script>

        var u_id;
        var radArray = [];
        var update_pm;
        var update_ll;
        var flag_username = true;
        // 首頁
        $(function () {

            /* initialize the external events
             -----------------------------------------------------------------*/
            function ini_events(ele) {
                ele.each(function () {

                    // create an Event Object (https://fullcalendar.io/docs/event-object)
                    // it doesn't need to have a start or end
                    var eventObject = {
                        title: $.trim($(this).text()) // use the element's text as the event title
                    }

                    // store the Event Object in the DOM element so we can get to it later
                    $(this).data('eventObject', eventObject)

                    // make the event draggable using jQuery UI
                    $(this).draggable({
                        zIndex: 1070,
                        revert: true, // will cause the event to go back to its
                        revertDuration: 0  //  original position after the drag
                    })

                })
            }

            ini_events($('#external-events div.external-event'))

            /* initialize the calendar
             -----------------------------------------------------------------*/
            //Date for the calendar events (dummy data)
            var date = new Date()
            var d = date.getDate(),
                m = date.getMonth(),
                y = date.getFullYear()

            var Calendar = FullCalendar.Calendar;
            var Draggable = FullCalendar.Draggable;

            var containerEl = document.getElementById('external-events');
            var checkbox = document.getElementById('drop-remove');
            var calendarEl = document.getElementById('calendar');

            // initialize the external events
            // -----------------------------------------------------------------

            new Draggable(containerEl, {
                itemSelector: '.external-event',
                eventData: function (eventEl) {
                    return {
                        title: eventEl.innerText,
                        backgroundColor: window.getComputedStyle(eventEl, null).getPropertyValue('background-color'),
                        borderColor: window.getComputedStyle(eventEl, null).getPropertyValue('background-color'),
                        textColor: window.getComputedStyle(eventEl, null).getPropertyValue('color'),
                    };
                }
            });

            var calendar = new Calendar(calendarEl, {
                headerToolbar: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'dayGridMonth,timeGridWeek,timeGridDay'
                },
                themeSystem: 'bootstrap',
                //Random default events
                events: [
                    {
                        title: 'All Day Event',
                        start: new Date(y, m, 1),
                        backgroundColor: '#f56954', //red
                        borderColor: '#f56954', //red
                        allDay: true
                    },
                    {
                        title: 'Long Event',
                        start: new Date(y, m, d - 5),
                        end: new Date(y, m, d - 2),
                        backgroundColor: '#f39c12', //yellow
                        borderColor: '#f39c12' //yellow
                    },
                    {
                        title: 'Meeting',
                        start: new Date(y, m, d, 10, 30),
                        allDay: false,
                        backgroundColor: '#0073b7', //Blue
                        borderColor: '#0073b7' //Blue
                    },
                    {
                        title: 'Lunch',
                        start: new Date(y, m, d, 12, 0),
                        end: new Date(y, m, d, 14, 0),
                        allDay: false,
                        backgroundColor: '#00c0ef', //Info (aqua)
                        borderColor: '#00c0ef' //Info (aqua)
                    },
                    {
                        title: 'Birthday Party',
                        start: new Date(y, m, d + 1, 19, 0),
                        end: new Date(y, m, d + 1, 22, 30),
                        allDay: false,
                        backgroundColor: '#00a65a', //Success (green)
                        borderColor: '#00a65a' //Success (green)
                    },
                    {
                        title: 'Click for Google',
                        start: new Date(y, m, 28),
                        end: new Date(y, m, 29),
                        url: 'https://www.google.com/',
                        backgroundColor: '#3c8dbc', //Primary (light-blue)
                        borderColor: '#3c8dbc' //Primary (light-blue)
                    }
                ],
                editable: true,
                droppable: true, // this allows things to be dropped onto the calendar !!!
                drop: function (info) {
                    // is the "remove after drop" checkbox checked?
                    if (checkbox.checked) {
                        // if so, remove the element from the "Draggable Events" list
                        info.draggedEl.parentNode.removeChild(info.draggedEl);
                    }
                }
            });

            calendar.render();
            // $('#calendar').fullCalendar()

            /* ADDING EVENTS */
            var currColor = '#3c8dbc' //Red by default
            // Color chooser button
            $('#color-chooser > li > a').click(function (e) {
                e.preventDefault()
                // Save color
                currColor = $(this).css('color')
                // Add color effect to button
                $('#add-new-event').css({
                    'background-color': currColor,
                    'border-color': currColor
                })
            })
            $('#add-new-event').click(function (e) {
                e.preventDefault()
                // Get value and make sure it is not null
                var val = $('#new-event').val()
                if (val.length == 0) {
                    return
                }

                // Create events
                var event = $('<div />')
                event.css({
                    'background-color': currColor,
                    'border-color': currColor,
                    'color': '#fff'
                }).addClass('external-event')
                event.text(val)
                $('#external-events').prepend(event)

                // Add draggable funtionality
                ini_events(event)

                // Remove event from text input
                $('#new-event').val('')
            })
        });


        $(function () {
            // 會員資料讀取
            $.ajax({
                type: "GET",
                url: "../../2024/project13/project_bg_member_Read_api.php",
                dataType: "json",
                async: false,
                success: showdata,
                error: function () {
                    alert("Error-../../2024/project13/project_bg_member_Read_api.php");
                }
            });

            // 修改會員資料
            $("body").on("click", "#mydata #update_btn", function () {
                console.log("update_btn_ok");
                console.log($(this).data("id"));
                console.log($(this).data("account"));
                console.log($(this).data("username"));
                console.log($(this).data("nickname"));
                console.log($(this).data("mobile"));
                console.log($(this).data("email"));
                console.log($(this).data("address"));
                console.log($(this).data("gender"));
                console.log($(this).data("permissions"));
                console.log($(this).data("level"));

                u_id = $(this).data("id");
                $("#update_account").val($(this).data("account"));
                $("#update_username").val($(this).data("username"));
                $("#update_nickname").val($(this).data("nickname"));
                $("#update_mobile").val($(this).data("mobile"));
                $("#update_email").val($(this).data("email"));
                $("#update_address").val($(this).data("address"));
                radArray = $(this).data("gender") ? $(this).data("gender").split(", ") : [];
                console.log(radArray);
                $("#update_pm").val($(this).data("permissions"));
                $("#update_level").val($(this).data("level"));
                console.log($("#update_pm").val());

                // 檢查權限 監聽 switch #update_pm
                // 按修改鍵後，switch01.text顯示的資料
                update_pm = $("#update_pm").val();
                console.log(update_pm);
                if (update_pm == "啟用") {
                    $("#update_pm").prop('checked', true);
                    $("#update_pm").next().text("啟用");
                } else {
                    $("#update_pm").prop('checked', false);
                    $("#update_pm").next().text("停權");
                }

                // 監聽switch #update_pm
                // 判定修改後的資料傳送到後端
                $("#update_pm").change(function () {
                    console.log($(this).is(':checked'));
                    if ($(this).is(':checked')) {
                        $(this).next().text("啟用");
                        update_pm = "啟用";
                    } else {
                        $(this).next().text("停權");
                        update_pm = "停權";
                    }
                });

                // 檢查性別 監聽 radio #rad
                console.log(radArray.length);
                $("#radio_male").prop('checked', false);
                $("#radio_female").prop('checked', false);
                for (var i = 0; i < radArray.length; i++) {
                    if (radArray[i] == "男性") {
                        $("#radio_male").prop('checked', true);
                        flag_gender = true;
                    } else if (radArray[i] == "女性") {
                        $("#radio_female").prop('checked', true);
                        flag_gender = true;
                    } else if (radArray[i] == "") {
                        flag_gender = false;
                    }
                };

                // 監聽_即時監聽 #Level
                $('#update_level').bind("input propertychange", function () {
                    console.log($(this).val());
                    update_ll = $(this).val();
                });
            });

            // modal更新會員資料
            $("#modal_update_btn").click(function () {
                var red_gender = [];
                $.each($("input[name='rad']:checked"), function () {
                    red_gender = $(this).val();
                });

                if (update_pm == "啟用") {
                    update_pm = "1";
                } else {
                    update_pm = "0";
                }

                if (update_ll == "VIP會員") {
                    update_ll = "90";
                } else {
                    update_ll = "100";
                }

                // if (flag_username == true && flag_nickname == true && flag_mobile == true && flag_email == true && flag_address == true) {
                if (flag_username == true) {

                    // 產生json格式的參數
                    var dataJSON = {};
                    dataJSON["ID"] = u_id;
                    dataJSON["UserName"] = $("#update_username").val();
                    dataJSON["NickName"] = $("#update_nickname").val();
                    dataJSON["Gender"] = red_gender;
                    dataJSON["Mobile"] = $("#update_mobile").val();
                    dataJSON["Email"] = $("#update_email").val();
                    dataJSON["Birthday"] = $("#update_birthday").val();
                    dataJSON["Address"] = $("#update_address").val();
                    dataJSON["Permissions"] = update_pm;
                    dataJSON["Level"] = update_ll;

                    console.log(JSON.stringify(dataJSON));

                    // 傳遞更新參數至後端api
                    // $.ajax({
                    //     type: "POST",
                    //     url: "../../2024/project13/project_MemberCenter_Update_api.php",
                    //     data: JSON.stringify(dataJSON),
                    //     dataType: "json",
                    //     success: showdata_update,
                    //     error: function () {
                    //         alert("Error-../../2024/project13/project_MemberCenter_Update_api.php");
                    //     }
                    // });

                } else {
                    alert("資料欄位填寫格式有誤!!");
                }
            });

            $("#delete_choose01").change(function () {
                // 获取全选复选框的状态
                var isChecked = $(this).prop("checked");

                // 将所有其他复选框的状态设置为与全选复选框相同
                $("input[name='delete_choose']").prop("checked", isChecked);
            });
        });

        // 讀取會員資料
        function showdata(data) {
            console.log(data);
            $("#mydata").empty();
            data.data.forEach(function (item) {
                for (var Permissions in item) {
                    if (item[Permissions] == 1) {
                        item[Permissions] = '啟用';
                    }

                    if (item[Permissions] == "0") {
                        item[Permissions] = '停權';
                    }
                }

                for (var Level in item) {
                    if (item[Level] == 90) {
                        item[Level] = 'VIP會員';
                    }

                    if (item[Level] == 100) {
                        item[Level] = '一般會員';
                    }
                }

                var strHTML =
                    '<tr>' +
                    '<td style="vertical-align: middle;"><a href="#">' + item.Account + '</a></td>' +
                    '<td style="vertical-align: middle;">' + item.UserName + '</td>' +
                    '<td style="vertical-align: middle;">' + item.Level + '</td>' +
                    '<td style="vertical-align: middle;">' + item.Permissions + '</td>' +
                    '<td style="vertical-align: middle;">' +
                    '<p class="my-0">' + item.Update_at + '</p>' +
                    '</td>' +
                    '<td style="vertical-align: middle;">' +
                    '<p class="my-0">' + item.Created_at + '</p>' +
                    '</td>' +
                    '<td style="vertical-align: middle;">' +
                    '<button class="btn btn-outline-dark" data-bs-toggle="modal" data-bs-target="#UpdateModal" data-id="' + item.ID + '" data-photo="xx" data-username="' + item.UserName + '" data-nickname="' + item.NickName + '" data-gender="' + item.Gender + '" data-mobile="' + item.Mobile + '" data-email="' + item.Email + '" data-birthday="xx" data-address="' + item.Address + '" data-account="' + item.Account + '" data-level="' + item.Level + '" data-permissions="' + item.Permissions + '" id="update_btn">修改</button>' +
                    '</td>' +
                    '<td style="vertical-align: middle;">' +
                    '<div class="form-check form-check-inline">' +
                    '<input type="checkbox" class="mt-1 ms-auto form-check-input" name="delete_choose" id="delete_choose02">' +
                    '<label for="delete_choose02" class="form-check-label"></label>' +
                    '</div>' +
                    '</td>' +
                    '</tr>';
                $("#mydata").append(strHTML);

            });
        }


    </script> -->
</body>

</html>